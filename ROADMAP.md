# DevPortal 后续优化清单（计划）

说明：此文件仅用于记录后续要做的任务与验收标准；**在你明确说“开始做第 X 项”之前，不进入代码开发**。

## 优先级约定

- **P0**：必须做 / 高收益 / 风险控制
- **P1**：体验增强（效率与可用性）
- **P2**：质量与长期维护（可持续迭代）
- **P3**：流程与运维（减少踩坑）

## 待办任务（10 项）

### P0（必须做/高收益）

- [ ] **P0-1 文本 Tab 不默认展示解析预览表**
  - 目标：文本 Tab 以“原文查看”为主，解析预览统一放到“批量导入弹窗”里。
  - 验收：
    - 文本 Tab 顶部只保留“识别/已存在/可导入”汇总 + 导入按钮（从当前文本/粘贴覆盖）。
    - 不在文本 Tab 展示解析预览表格（或默认折叠且不占空间）。
    - 解析预览与编辑仍可在“批量导入弹窗”完成。

- [ ] **P0-2 部署脚本强校验扩展 Key**
  - 目标：避免上线后插件报 `Server not configured`。
  - 验收：
    - `server-deploy.sh` 在首次部署/更新前检查 `.env` 是否包含 `DEVPORTAL_EXTENSION_API_KEY`。
    - 缺失时明确提示需要配置，并给出示例值/说明。

- [ ] **P0-3 账号唯一性约束（DB 层）【延期/可选】**
  - 说明：当前为内部系统，暂不强制 DB 唯一；先依赖应用层去重与“已存在/重复”提示，允许少量重复由用户手动清理。
  - 目标（如后续需要再做）：彻底杜绝并发/多端导入导致重复账号。
  - 验收（如后续需要再做）：
    - 数据库添加唯一索引：`account(module_id, account, password)`。
    - 导入/新增若触发冲突，前端提示友好（不影响其它成功项）。

### P1（体验增强）

- [ ] **P1-4 批量导入弹窗：状态筛选/仅看“将导入”**
  - 目标：数据多时更快定位需要导入的条目。
  - 验收：
    - 支持筛选：将导入 / 已存在 / 重复 / 无效（至少“仅看将导入”）。

- [ ] **P1-5 单条导入后行内即时状态更新**
  - 目标：用户导入一条后能立刻看到该条变更（无需心里记忆）。
  - 验收：
    - 单条导入成功后，该行状态立即变为“已存在”，并禁用“导入”按钮（或自动移出“将导入”视图）。

- [ ] **P1-6 批次备注策略更清晰（文案/开关）**
  - 目标：避免用户误解“会覆盖已有账号备注/描述”。
  - 验收：
    - 在导入弹窗中明确说明：仅新增写入 `remark/accountInfo`，不会覆盖已存在记录（或提供可选策略）。

### P2（质量与长期维护）

- [ ] **P2-7 `accountInfo` 推荐填写规范**
  - 目标：让插件/列表能稳定区分多账号。
  - 验收：
    - 给出推荐格式与示例（如：`系统-角色-地区`），并在 UI 提示/占位符中体现。

- [ ] **P2-8 解析规则迭代机制（样例库/黑白名单）**
  - 目标：让“文本解析”可持续提升，不靠拍脑袋改规则。
  - 验收：
    - 形成样例收集方式（失败样例/误判样例）。
    - 支持最小的规则迭代（黑名单/白名单或特殊格式优先级）。

- [ ] **P2-9 插件填充失败兜底（手动选择输入框）**
  - 目标：复杂登录页也能用（失败时可控）。
  - 验收：
    - 自动填充失败时，提供“选择账号框/密码框”的交互兜底（只在失败时出现）。

### P3（流程与运维）

- [ ] **P3-10 发布前检查清单**
  - 目标：把“容易踩坑的点”沉淀成流程。
  - 验收：
    - 一份可执行的检查项：Prisma generate、build、环境变量、插件 Key 一致性、容器重建方式等。
